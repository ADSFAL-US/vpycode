"""
–ü–ª–∞–≥–∏–Ω, –¥–æ–±–∞–≤–ª—è—é—â–∏–π —Ç–µ–º–Ω—É—é —Ç–µ–º—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞.
"""
from plugins.base import Plugin

class DarkTheme(Plugin):
    """–ü–ª–∞–≥–∏–Ω —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π –¥–ª—è vpycode."""
    
    def __init__(self, app):
        super().__init__(app)
        self.name = "DarkTheme"
        self.version = "1.0.0"
        self.description = "–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è vpycode"
        self.author = "vpycode Team"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã
        self.theme_colors = {
            "BACKGROUND": "#121212",
            "FOREGROUND": "#E0E0E0",
            "DARKER_BG": "#0A0A0A",
            "LIGHTER_BG": "#1E1E1E",
            
            "KEYWORD": "#BB86FC",     # –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            "STRING": "#03DAC6",      # –ë–∏—Ä—é–∑–æ–≤—ã–π –¥–ª—è —Å—Ç—Ä–æ–∫
            "COMMENT": "#6B6B6B",     # –°–µ—Ä—ã–π –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
            "FUNCTION": "#82AAFF",    # –ì–æ–ª—É–±–æ–π –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
            "NUMBER": "#CF6679",      # –†–æ–∑–æ–≤—ã–π –¥–ª—è —á–∏—Å–µ–ª
            "CLASS": "#4DD0E1",       # –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
            "OPERATOR": "#FF5252",    # –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
            
            "SELECTION": "#515151",
            "CURSOR": "#FFFFFF",
            "LINE_HIGHLIGHT": "#1F1F1F",
            "SCROLLBAR": "#333333",
            "PANEL_BG": "#121212",
            "PANEL_FG": "#E0E0E0",
            "BUTTON_BG": "#2C2C2C",
            "BUTTON_HOVER": "#383838",
            
            "CONSOLE_BG": "#0E0E0E",
            "CONSOLE_FG": "#E0E0E0",
            "CONSOLE_ERROR": "#CF6679",
            "CONSOLE_SUCCESS": "#00C853",
            "CONSOLE_INFO": "#03DAC6",
            
            "AI_BG": "#0E0E0E",
            "AI_USER_MSG": "#E0E0E0",
            "AI_BOT_MSG": "#82AAFF",
            "AI_ACCENT": "#BB86FC"
        }
        
        # –ö–Ω–æ–ø–∫–∞ –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç–µ–º—ã
        self.sidebar_button = None
    
    def activate(self):
        """–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞."""
        print(f"–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ {self.name}")
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
        self.sidebar_button = self.add_sidebar_button("üåô", self.apply_dark_theme)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –≤ –º–µ–Ω—é "–í–∏–¥"
        self.add_menu_command("–í–∏–¥", "–¢–µ–º–Ω–∞—è —Ç–µ–º–∞", self.apply_dark_theme)
        
        print(f"–ü–ª–∞–≥–∏–Ω {self.name} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.")
    
    def deactivate(self):
        """–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞."""
        print(f"–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ {self.name}")
        
        # –ü—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –Ω–∏—á–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –Ω–µ –¥–µ–ª–∞–µ–º
        # –¢–µ–º—É –Ω–µ –º–µ–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ —É–∂–µ –ø—Ä–∏–≤—ã–∫–Ω—É—Ç—å
        
        print(f"–ü–ª–∞–≥–∏–Ω {self.name} –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.")
    
    def apply_dark_theme(self):
        """–ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É."""
        # –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        self.change_theme(self.theme_colors)
        
        # –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
        self.app.write_to_console("–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞\n", "info") 